# ä¹å®®æ ¼é è¦½ | Nine Box Preview

[ç¹é«”ä¸­æ–‡](#ç¹é«”ä¸­æ–‡) | [English](#english)

![ä¹å®®æ ¼é è¦½è¦–çª—](NineBoxView_image1.png "ä¹å®®æ ¼é è¦½")

---

## ç¹é«”ä¸­æ–‡

é€™æ˜¯ä¸€å€‹ç‚º [Glyphs å­—å‹ç·¨è¼¯è»Ÿé«”](http://glyphsapp.com/) é–‹ç™¼çš„å¤–æ›ï¼Œå°ˆç‚ºå­—å‹è¨­è¨ˆå¸«æä¾›å³æ™‚é è¦½åŠŸèƒ½ã€‚
é€é Python å’Œ Vanilla æ¨¡çµ„å¯¦ä½œï¼Œåˆ©ç”¨ NSView çš„å­é¡åˆ¥å¯¦ç¾ç¹ªè£½åŠŸèƒ½ã€‚
æ­¤å·¥å…·è®“è¨­è¨ˆå¸«èƒ½åŒæ™‚é è¦½å­—ç¬¦åœ¨ä¸åŒç’°å¢ƒä¸‹çš„æ­é…æ•ˆæœã€‚

### ä¸»è¦åŠŸèƒ½

- å³æ™‚é¡¯ç¤ºæ­£åœ¨ç·¨è¼¯çš„å­—ç¬¦
- æ”¯æ´è‡ªè¨‚å‘¨åœåƒè€ƒå­—ç¬¦
- æä¾›æ˜äº®ï¼é»‘æš—å…©ç¨®é¡¯ç¤ºæ¨¡å¼
- é»æ“Šé è¦½å€é‡æ–°éš¨æ©Ÿæ’åˆ—åƒè€ƒå­—ç¬¦
- å¤šåœ‹èªè¨€æ”¯æ´

## ä½¿ç”¨æ–¹æ³•

1. å¾ã€Œè¦–çª—ã€é¸å–®ä¸­é–‹å•Ÿã€Œä¹å®®æ ¼é è¦½ã€å¤–æ›ã€‚
2. é è¦½ç•«é¢ä¸­å¤®æœƒé¡¯ç¤ºç›®å‰æ­£åœ¨ç·¨è¼¯çš„å­—ç¬¦ã€‚
3. ä½¿ç”¨ä¸‹æ–¹çš„è¼¸å…¥æ¡†å¯åŒæ™‚ä¿®æ”¹é¡¯ç¤ºåœ¨å‘¨åœçš„åƒè€ƒå­—ã€‚
4. é»æ“Šå³ä¸‹æ–¹ ğŸŒ™/â˜€ï¸ æŒ‰éˆ•å¯åˆ‡æ›æ˜äº®ï¼é»‘æš—é¡¯ç¤ºæ¨¡å¼ã€‚
5. é»æ“Šé è¦½ç•«é¢å¯é‡æ–°éš¨æ©Ÿæ’åˆ—å‘¨åœå­—ç¬¦ã€‚
6. ä½¿ç”¨å­—ç¬¦é¸æ“‡å™¨æŒ‰éˆ• ğŸ”£ å¯å¿«é€Ÿé¸æ“‡åƒè€ƒå­—ç¬¦ã€‚

### å®‰è£æ–¹å¼

1. å¾ã€Œè¦–çª—ã€é¸å–®é–‹å•Ÿã€Œå¤–æ›ç¨‹å¼ç®¡ç†å“¡ã€ã€‚
2. æ‰¾åˆ°ã€Œä¹å®®æ ¼é è¦½ã€ä¸¦é»æ“Šã€Œå®‰è£ã€æŒ‰éˆ•ã€‚
3. é‡æ–°å•Ÿå‹• Glyphs å³å¯ä½¿ç”¨ã€‚

ğŸŒ¿ æ³¨æ„ï¼šã€Œä¹å®®æ ¼é è¦½ã€éœ€è¦ *Vanilla* æ¨¡çµ„æ‰èƒ½é‹ä½œã€‚
è«‹åœ¨ã€Œå¤–æ›ç¨‹å¼ç®¡ç†å“¡ã€çš„ã€Œæ¨¡çµ„ã€åˆ†é ä¸­å®‰è£ Vanillaã€‚
æœ¬å¤–æ›ä½¿ç”¨ Vanilla çš„ FloatingWindow å’Œå…¶ä»– UI å…ƒä»¶ã€‚

### ç³»çµ±éœ€æ±‚

æ­¤å¤–æ›åœ¨ Glyphs 3.2.3 ç‰ˆæœ¬ä¸­æ¸¬è©¦é€šéã€‚å­—ç¬¦é¸æ“‡å™¨åŠŸèƒ½éœ€è¦ Glyphs 3.2 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆä½¿ç”¨äº† PickGlyphs APIï¼‰ã€‚

### æŠ€è¡“ç‰¹é»èˆ‡æ”¹é€²

ç›¸è¼ƒæ–¼ç¬¬ä¸€ç‰ˆï¼Œé€™æ¬¡çš„æ›´æ–°æ•´åˆäº†å¤šé …æŠ€è¡“æ”¹é€²ï¼š

- ç²¾ç°¡èˆ‡å„ªåŒ–ç¸®æ”¾æ¼”ç®—æ³•ï¼ˆä½¿ç”¨ NSAffineTransform å¯¦ç¾è®Šæ›çŸ©é™£èˆ‡ç¸®æ”¾ï¼‰
- æ”¹å–„å­—ç¬¦å°é½Šæ–¹å¼ï¼Œæ¡ç”¨åº§æ¨™ä¸­å¿ƒé»è¨ˆç®—ï¼ˆé€é centerX èˆ‡ centerYï¼‰æ”¯æ´ä¸ç­‰å¯¬å­—å‹
- æ–°å¢å­—ç¬¦é¸æ“‡å™¨åŠŸèƒ½ï¼Œæ•´åˆ Glyphs 3.2 çš„ PickGlyphs API ä»‹é¢
- ç°¡åŒ– UI ä»‹é¢ï¼Œç§»é™¤å†—é¤˜æ§åˆ¶é …ï¼Œå°ˆæ³¨æ–¼é¡¯ç¤ºå“è³ª
- å¢åŠ åœ¨åœ°åŒ–æ”¯æ´ï¼ˆä½¿ç”¨ Glyphs.localize ç³»çµ±ï¼‰
- æ•ˆèƒ½å„ªåŒ–ï¼ˆé‡æ§‹ç¹ªè£½å‡½å¼ drawRect_ èˆ‡äº‹ä»¶è™•ç† mouseDown_ï¼‰

### å›é¥‹èˆ‡å»ºè­°

å¦‚æœä½ åœ¨ä½¿ç”¨éç¨‹ä¸­ç™¼ç¾ä»»ä½•å•é¡Œæˆ–æœ‰æ”¹é€²å»ºè­°ï¼Œæ­¡è¿é€é [GitHub Issues](https://github.com/yintzuyuan/NineBoxView/issues) å›å ±ã€‚
æ‰€æœ‰éŒ¯èª¤å›å ±éƒ½ä½¿ç”¨ traceback æ¨¡çµ„é€²è¡Œè¨˜éŒ„ã€‚

### è‡´è¬

ç‰¹åˆ¥æ„Ÿè¬ Aaron Bell çš„ [RotateView](https://github.com/aaronbell/RotateView) å¤–æ›ï¼Œè®“æˆ‘äº†è§£å¦‚ä½•ä½¿ç”¨ NSView å­é¡åˆ¥å¯¦ç¾å³æ™‚é è¦½ã€‚
ä¹Ÿè¦æ„Ÿè¬å¤§æ›²éƒ½å¸‚çš„ [Waterfall](https://github.com/Tosche/Waterfall) å¤–æ›ï¼Œå•Ÿç™¼äº†æˆ‘å¦‚ä½•å¯¦ä½œ UI äº’å‹•åŠŸèƒ½ã€‚

é€™æ¬¡çš„æ”¹ç‰ˆè¦ç‰¹åˆ¥æ„Ÿè¬ AI è¼”åŠ©å·¥å…·ï¼Œå®ƒå¹«åŠ©æˆ‘è§£æ±ºäº†è¨±å¤šæœ‰é—œ Objective-C æ©‹æ¥å’Œ Cocoa æ¡†æ¶çš„æŠ€è¡“å•é¡Œã€‚

æœ€å¾Œï¼Œæ„Ÿè¬æ‰€æœ‰ä½¿ç”¨é€™å€‹å¤–æ›ä¸¦æä¾›å›é¥‹çš„è¨­è¨ˆå¸«å€‘ã€‚
ä½ å€‘çš„æ„è¦‹å¹«åŠ©æˆ‘æŒçºŒå„ªåŒ–ç¨‹å¼ç¢¼æ¶æ§‹å’Œä½¿ç”¨é«”é©—ã€‚

### ç‰ˆæ¬Šè²æ˜

æ­¤å¤–æ›ç”±æ®·æ…ˆé æ–¼ 2023 å¹´ 1 æœˆé¦–æ¬¡ç™¼å¸ƒï¼Œä¸¦æ–¼ 2024 å¹´ 8 æœˆé€²è¡Œé‡å¤§æ›´æ–°ã€‚
æœ¬å°ˆæ¡ˆæ¡ç”¨ Apache License 2.0 æˆæ¬Šã€‚æºç¢¼é–‹æ”¾æ–¼ GitHubï¼Œè©³ç´°æˆæ¬Šæ¢æ¬¾è«‹åƒé–±å°ˆæ¡ˆä¸­çš„ LICENSE æ–‡ä»¶ã€‚

---

## English

This is a plugin developed for [Glyphs font editing software](http://glyphsapp.com/), providing real-time preview functionality for font designers. Implemented using Python and the Vanilla module, it utilizes an NSView subclass for drawing functionality. This tool allows designers to preview character combinations in different contexts simultaneously.

### Main Features

- Real-time display of the character being edited
- Support for customizing surrounding reference characters
- Light/Dark display modes
- Click preview area to randomly rearrange reference characters
- Multi-language support

### How to Use

1. Open the "Nine Box Preview" plugin from the "Window" menu.
2. The preview screen will display the character currently being edited in the center.
3. Use the input box at the bottom to modify the reference characters displayed around.
4. Click the ğŸŒ™/â˜€ï¸ button in the lower right to switch between Light/Dark display modes.
5. Click the preview area to randomly rearrange surrounding characters.
6. Use the Glyph Picker button ğŸ”£ to quickly select reference characters.

### Installation

1. Open the "Plugin Manager" from the "Window" menu.
2. Find "Nine Box Preview" and click the "Install" button.
3. Restart Glyphs to use the plugin.

ğŸŒ¿ Note: "Nine Box Preview" requires the *Vanilla* module to function. Please install Vanilla in the "Modules" tab of the "Plugin Manager". This plugin uses Vanilla's FloatingWindow and other UI components.

### System Requirements

This plugin has been tested on Glyphs 3.2.3. The Glyph Picker feature requires Glyphs 3.2 or higher (uses PickGlyphs API).

### Technical Features and Improvements

Compared to the first version, this update integrates several technical improvements:

- Streamlined and optimized scaling algorithm (using NSAffineTransform for transformation matrix and scaling)
- Improved character alignment using coordinate center point calculations (via centerX and centerY) supporting variable-width fonts
- Added Glyph Picker functionality, integrating Glyphs 3.2's PickGlyphs API interface
- Simplified UI interface, removed redundant controls, focusing on display quality
- Added localization support (using Glyphs.localize system)
- Performance optimization (refactored drawRect_ function and mouseDown_ event handling)

### Feedback and Suggestions

If you encounter any issues or have suggestions for improvement while using the plugin, please report them via [GitHub Issues](https://github.com/yintzuyuan/NineBoxView/issues). All error reports are logged using the traceback module.

### Acknowledgements

Special thanks to Aaron Bell's [RotateView](https://github.com/aaronbell/RotateView) plugin, which helped me understand how to implement real-time preview using NSView subclasses. Also thanks to Toshi Omagari's [Waterfall](https://github.com/Tosche/Waterfall) plugin, which inspired me on how to implement UI interaction functionality.

For this update, I'd especially like to thank AI-assisted tools, which helped me solve many technical challenges related to Objective-C bridging and the Cocoa framework.

Lastly, thanks to all the designers who use this plugin and provide feedback. Your opinions help me continuously optimize the code structure and user experience.

### Copyright Notice

This plugin was first released by Tzuyuan Yin in January 2023 and underwent a major update in August 2024. This project is licensed under the Apache License 2.0. The source code is open on GitHub, for detailed license terms please refer to the LICENSE file in the project.
