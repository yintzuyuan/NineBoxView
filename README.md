# ä¹å®®æ ¼é è¦½ | Nine Box Preview

[ç¹é«”ä¸­æ–‡](#ç¹é«”ä¸­æ–‡) | [English](#english)

![ä¹å®®æ ¼é è¦½è¦–çª—](NineBoxView_image1.png "ä¹å®®æ ¼é è¦½")

---

## ç¹é«”ä¸­æ–‡

é€™æ˜¯ä¸€å€‹ç‚º [Glyphs å­—å‹ç·¨è¼¯è»Ÿé«”](http://glyphsapp.com/) é–‹ç™¼çš„å¤–æ›ï¼Œå°ˆç‚ºå­—å‹è¨­è¨ˆå¸«æä¾›å³æ™‚é è¦½åŠŸèƒ½ã€‚é€é Pythonã€Objective-C å’Œ AppKit æ¡†æ¶å¯¦ä½œï¼Œåˆ©ç”¨ NSView çš„å­é¡åˆ¥å¯¦ä½œç¹ªè£½åŠŸèƒ½ã€‚æ­¤å·¥å…·è®“è¨­è¨ˆå¸«èƒ½åŒæ™‚é è¦½å­—ç¬¦åœ¨ä¸åŒç’°å¢ƒä¸‹çš„æ­é…æ•ˆæœã€‚

ç¬¬ä¸‰ç‰ˆç¶“æ­·äº†å¾ v3.0.0 åˆ° v3.3.2 çš„æ¼¸é€²å¼ç™¼å±•ï¼Œå¾åˆæœŸçš„æ¨¡çµ„åŒ–é‡æ§‹ï¼Œç™¼å±•è‡³ç•¶å‰çš„å¤šåœ‹èªè¨€æ”¯æ´ã€æ™ºæ…§ä¸»é¡Œç›£æ¸¬å’Œä¸‰å±¤å³æ™‚é‡ç¹ªç³»çµ±ã€‚æ•´å€‹é–‹ç™¼æ­·ç¨‹è·¨è¶Šå…©å€‹å„²å­˜åº«ï¼Œçµåˆäº†ç¤¾ç¾¤å›é¥‹å’Œ AI å”ä½œé–‹ç™¼ï¼Œæ—¨åœ¨æä¾›æ›´å°ˆæ³¨ã€æ›´é«˜æ•ˆã€æ›´åœ‹éš›åŒ–çš„é è¦½é«”é©—ã€‚

### ä¸»è¦åŠŸèƒ½

#### âš¡ å³æ™‚é è¦½ç³»çµ±

  - **ä¸‰å±¤å³æ™‚é‡ç¹ªï¼š** ä¸­å¤®æ ¼èˆ‡å‘¨åœæ ¼é›¶å»¶é²åŒæ­¥æ›´æ–°
  - **å‚™ä»½åœ–å±¤æ”¯æ´ï¼š** å³æ™‚é è¦½ä¸åŒç‰ˆæœ¬å’Œä¸»æ¿çš„å­—ç¬¦
  - **[Light Table](https://formkunft.com/light-table/) æ•´åˆï¼š** æ”¯æ´å‰å¾Œç‰ˆæœ¬å°ç…§é¡¯ç¤º

#### ğŸ—”ï¸ é€²éšæ§åˆ¶åŠŸèƒ½

  - **æ™ºæ…§å­—ç¬¦éæ¿¾ï¼š** è‡ªå‹•é©—è­‰ CJKã€Nice Namesã€Unicode Names
  - **ç¨ç«‹æ§åˆ¶é¢æ¿ï¼š** å¯æ”¶åˆè¨­è¨ˆï¼Œæ”¯æ´åŠ å…¥åƒè€ƒå­—ç¬¦å’Œç²¾ç¢ºé–å®š
  - **å³éµé¸å–®å¢å¼·ï¼š** æ”¯æ´å­—ç¬¦é¸æ“‡å™¨å’Œæ’å…¥åŠŸèƒ½

#### ğŸ¨ ä½¿ç”¨è€…é«”é©—

  - **è¦–è¦ºå›é¥‹ç³»çµ±ï¼š** ç„¡æ•ˆå­—ç¬¦æ¨™è¨»
  - **éŸ¿æ‡‰å¼ä½ˆå±€ï¼š** ä¹å®®æ ¼éš¨è¦–çª—å¤§å°è‡ªå‹•ç¸®æ”¾
  - **åå¥½è¨˜æ†¶ï¼š** è¦–çª—å¤§å°ã€ä½ç½®ã€è¨­å®šç‹€æ…‹å®Œæ•´ä¿å­˜

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬æ“ä½œ

1.  å¾ã€Œè¦–çª—ã€é¸å–®ä¸­é–‹å•Ÿã€Œä¹å®®æ ¼é è¦½ã€å¤–æ›ã€‚
2.  é è¦½ç•«é¢ä¸­å¤®æœƒå³æ™‚é¡¯ç¤ºç›®å‰æ­£åœ¨ç·¨è¼¯çš„å­—ç¬¦ã€‚
3.  é»æ“Šä¸»è¦–çª—æ¨™é¡Œåˆ—çš„ã€Œâš™ã€æŒ‰éˆ•å¯é–‹é—œç¨ç«‹çš„æ§åˆ¶é¢æ¿ã€‚

### æ§åˆ¶é¢æ¿åŠŸèƒ½

4.  åœ¨æ§åˆ¶é¢æ¿ä¸­ï¼š
      - **åƒè€ƒè¼¸å…¥æ¡†ï¼š** è¼¸å…¥å¤šå€‹åƒè€ƒå­—ç¬¦ï¼ˆä»¥ç©ºæ ¼åˆ†éš”ï¼‰ï¼Œå¤–æ›æœƒå°‡å…¶éš¨æ©Ÿæ’åˆ—æ–¼å‘¨åœçš„æ ¼å­ä¸­ã€‚æ”¯æ´ CJKã€Nice Namesã€Unicode Namesã€‚
      - **é–å®šè¼¸å…¥æ¡†ï¼š** 8 å€‹ç¨ç«‹è¼¸å…¥æ¡†ï¼Œç‚ºç‰¹å®šä½ç½®æŒ‡å®šå›ºå®šå­—ç¬¦ã€‚
      - **é–é ­åœ–ç¤ºï¼š** é»æ“Šï¼ˆğŸ”’/ğŸ”“ï¼‰åˆ‡æ›é–å®šæ¨¡å¼ã€‚
      - **æ¸…ç©ºé–å®šï¼š** ä¸€éµæ¸…é™¤æ‰€æœ‰é–å®šæ¡†å…§å®¹ã€‚
      - **å­—ç¬¦é¸æ“‡å™¨ï¼š** å³éµé»æ“Šè¼¸å…¥æ¡†ä½¿ç”¨å®˜æ–¹ã€Œå­—ç¬¦é¸æ“‡å™¨ã€ï¼Œæ–¹ä¾¿åŠ å…¥å¤šå€‹å­—ç¬¦ã€‚

### é€²éšç‰¹æ€§

5.  **äº’å‹•é‡æ’ï¼š** é»æ“Šé è¦½ç•«é¢é‡æ–°éš¨æ©Ÿæ’åˆ—æœªé–å®šçš„å­—ç¬¦ã€‚
6.  **ä¸»é¡Œè‡ªé©æ‡‰ï¼š** ä¸»é¡Œè‡ªå‹•è·Ÿéš¨ç•¶å‰åˆ†é çš„é è¦½å€è¨­å®šã€‚
7.  **ç¸®æ”¾æ”¯æ´ï¼š** ä¸»é è¦½è¦–çª—å¯ç¸®æ”¾ï¼Œå…§å®¹è‡ªå‹•é©æ‡‰ã€‚
8.  **å¤šèªè¨€ï¼š** ä»‹é¢è‡ªå‹•è·Ÿéš¨ Glyphs ç³»çµ±èªè¨€è¨­å®šã€‚

### å®‰è£æ–¹å¼

1.  å¾ã€Œè¦–çª—ã€é¸å–®é–‹å•Ÿã€Œå¤–æ›ç¨‹å¼ç®¡ç†å“¡ã€ã€‚
2.  æ‰¾åˆ°ã€Œä¹å®®æ ¼é è¦½ã€ä¸¦é»æ“Šã€Œå®‰è£ã€æŒ‰éˆ•ã€‚
3.  é‡æ–°å•Ÿå‹• Glyphs å³å¯ä½¿ç”¨ã€‚

### ç³»çµ±éœ€æ±‚

æ­¤å¤–æ›åœ¨ Glyphs 3.2.3 ç‰ˆæœ¬æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­æ¸¬è©¦é€šéã€‚éƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚å®˜æ–¹å­—ç¬¦é¸æ“‡å™¨ PickGlyphs APIï¼‰éœ€è¦ Glyphs 3.2 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

### æŠ€è¡“ç‰¹é»èˆ‡æ”¹é€²

ä¹å®®æ ¼é è¦½ v3.3.2 ç¶“æ­·äº†å¾ v3.0.0 åˆ°ç•¶å‰ç‰ˆæœ¬çš„å…¨é¢æ¼”é€²ï¼Œå°ˆæ³¨æ–¼ä½¿ç”¨è€…é«”é©—ã€æ•ˆèƒ½å’Œåœ‹éš›åŒ–ï¼š

#### ğŸ—ï¸ **å€Ÿé‘‘ [DrawBot](https://github.com/schriftgestalt/DrawBotGlyphsPlugin) æ¨¡å¼æ¶æ§‹**

  - **é«˜åº¦æ¨¡çµ„åŒ–æ¶æ§‹**ï¼šç¨‹å¼ç¢¼è¢«çµ„ç¹”åœ¨ 15 å€‹å°ˆæ¥­æ¨¡çµ„ä¸­ï¼Œæ¡ç”¨ Glyphs å®˜æ–¹æ¨è–¦çš„æ¶æ§‹æ¨¡å¼ï¼Œå¤§å¹…æå‡å¤–æ›çš„ç©©å®šæ€§èˆ‡å¯ç¶­è­·æ€§ã€‚
  - **å¹³é¢åº§æ¨™ç³»çµ±**ï¼šæ¡ç”¨ 0-8 ç›´è§€åº§æ¨™ç®¡ç†ï¼Œæ›¿ä»£äº†åŸå§‹è¼ƒç‚ºè¤‡é›œçš„ä¸‰å±¤æ¶æ§‹ã€‚
  - **æ¨¡çµ„åŒ–è¨­è¨ˆ**ï¼šDocumentã€Windowã€UIã€Coreã€Data æ¨¡çµ„é½Šå‚™ï¼Œè·è²¬åˆ†é›¢ï¼Œæ˜“æ–¼æœªä¾†æ“´å……ã€‚

#### ğŸŒ **å¤šåœ‹èªè¨€æ”¯æ´ç³»çµ±é‡æ§‹**

  - **é›†ä¸­åŒ–ç¿»è­¯ç®¡ç†**ï¼šå°‡æ—¢æœ‰çš„å¤šåœ‹èªè¨€åŠŸèƒ½é‡æ§‹æˆ`localization.py` æ¨¡çµ„ï¼Œçµ±ä¸€ç®¡ç†æ‰€æœ‰ UI æ–‡å­—ï¼Œä½¿ç¿»è­¯çš„æ“´å……èˆ‡ç¶­è­·æ›´åŠ å®¹æ˜“ã€‚
  - **5 èªè¨€å®Œæ•´æ”¯æ´**ï¼šå®Œæ•´æ”¯æ´è‹±æ–‡ã€ç¹é«”ä¸­æ–‡ã€ç°¡é«”ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ“æ–‡ã€‚
  - **Glyphs API æ•´åˆ**ï¼šä½¿ç”¨å®˜æ–¹ `Glyphs.localize()` API å¯¦ç¾è‡ªå‹•èªè¨€åˆ‡æ›ï¼Œç„¡ç¸«æ¥è»Œè»Ÿé«”ç’°å¢ƒã€‚

#### âš¡ **ä¸‰å±¤å³æ™‚é‡ç¹ªç³»çµ±**

  - **ä¸‰å±¤è³‡æ–™æ¶æ§‹**ï¼š`base_glyphs`ï¼ˆå³æ™‚ï¼‰â†’ `base_arrangement`ï¼ˆåƒè€ƒï¼‰â†’ `lock_inputs`ï¼ˆé–å®šï¼‰ï¼Œé€éæ¸…æ™°çš„è³‡æ–™è¦†è“‹é †åºï¼Œå¯¦ç¾è¤‡é›œçš„é¡¯ç¤ºé‚è¼¯ã€‚
  - **ä¸­å¤®æ ¼å³æ™‚é‡ç¹ª**ï¼šç•¶ä½ åœ¨ Glyphs ä¸­åˆ‡æ›æˆ–ç·¨è¼¯å­—ç¬¦æ™‚ï¼Œä¸­å¤®æ ¼èƒ½é›¶å»¶é²éŸ¿æ‡‰ã€‚
  - **å®Œæ•´å³æ™‚é«”é©—**ï¼šä¸­å¤®æ ¼èˆ‡å‘¨åœæ ¼åŒæ­¥æ›´æ–°ï¼Œæä¾›æµæš¢çš„é è¦½é«”é©—ã€‚

#### ğŸ–¥ï¸ **åˆ†é å±¤ç´šä¸»é¡Œç›£æ¸¬**

  - **ç²¾æº–çš„ä¸»é¡Œåµæ¸¬**ï¼šä¿®æ­£äº†ä»¥å¾€çš„å…¨åŸŸåµæ¸¬æ–¹å¼ï¼Œæ”¹ç‚ºåµæ¸¬ç•¶å‰ç·¨è¼¯åˆ†é çš„ä¸»é¡Œè¨­å®šï¼Œç¢ºä¿é è¦½è¦–çª—çš„é¡è‰²èˆ‡ä½ ç•¶ä¸‹çš„å·¥ä½œå€å®Œå…¨åŒæ­¥ã€‚
  - **å®˜æ–¹å»ºè­°**ï¼šæ¡ç”¨ Glyphs å®˜æ–¹é–‹ç™¼è€…[å»ºè­°](https://forum.glyphsapp.com/t/inverted-negativebutton-in-preview-panel-vs-preview-area-at-bottom-of-edit-view/7442/2)çš„ `Font.currentTab.previewView().setBlack_()` APIï¼Œç¢ºä¿ç©©å®šæ€§èˆ‡ç›¸å®¹æ€§ã€‚
  - **æ™ºæ…§å¾©åŸæ©Ÿåˆ¶**ï¼šæ–°å¢ `theme_detector.py` å¯¦ä½œå¤šå±¤ç´šåµæ¸¬å™¨ï¼Œåœ¨ç„¡æ³•åµæ¸¬åˆ°åˆ†é æ™‚èƒ½å„ªé›…åœ°å›å¾©è‡³å‚™ç”¨æ–¹æ¡ˆã€‚

#### ğŸ” **çµ±ä¸€å­—ç¬¦è¾¨è­˜ç³»çµ±**

  - **InputRecognitionService**ï¼šå»ºç«‹çµ±ä¸€çš„æœå‹™ä¾†è™•ç†æ‰€æœ‰å­—ç¬¦è¼¸å…¥ï¼Œç„¡è«–æ˜¯åƒè€ƒè¼¸å…¥æ¡†æˆ–é–å®šæ¡†ã€‚
  - **å®Œæ•´å­—ç¬¦æ”¯æ´**ï¼šå…¨é¢æ”¯æ´ CJK å­—å…ƒã€Nice Names èˆ‡ Unicode Names çš„è¾¨è­˜ã€‚
  - **æ™ºæ…§é–å®šè¼¸å…¥**ï¼šèƒ½å¤ ç²¾æº–è¾¨è­˜ä»¥ç©ºæ ¼åˆ†éš”çš„å¤šå€‹å­—ç¬¦æˆ–åç¨±ã€‚

#### ğŸ—‚ï¸ **ç¨ç«‹æ§åˆ¶é¢æ¿èˆ‡ UI å¢å¼·**

  - **å¯æ”¶åˆè¨­è¨ˆ**ï¼šä¸»é è¦½è¦–çª—å¯éš±è—æ§åˆ¶é¢æ¿ï¼Œæä¾›æ²‰æµ¸å¼é«”é©—ã€‚
  - **å³éµé¸å–®å¢å¼·**ï¼šæ–°å¢æ’å…¥å­—ç¬¦åˆ°åˆ†é ã€åœ¨æ–°åˆ†é é–‹å•Ÿç­‰å¯¦ç”¨åŠŸèƒ½ã€‚
  - **8 å€‹é–å®šè¼¸å…¥æ¡†**ï¼šè®“ä½ ç²¾ç¢ºæ§åˆ¶ä¹å®®æ ¼å‘¨åœä½ç½®çš„åƒè€ƒå­—ç¬¦ã€‚
  - **å®˜æ–¹å­—ç¬¦é¸æ“‡å™¨**ï¼šæ•´åˆ `PickGlyphs` APIï¼Œæ”¯æ´æœå°‹èˆ‡å¤šé¸ã€‚

#### ğŸ“Š **æ•ˆèƒ½èˆ‡ç©©å®šæ€§å„ªåŒ–**

  - **Light Table æ•´åˆ**ï¼šæ”¯æ´åœ¨ Light Table å¤–æ›çš„å·¥ä½œæ¨¡å¼ä¸‹ï¼Œå³æ™‚é è¦½å‰å¾Œç‰ˆæœ¬çš„å·®ç•°ã€‚æ­¤å¤–æ›å…·å‚™å„ªé›…é™ç´šæ©Ÿåˆ¶ï¼Œå³ä½¿æœªå®‰è£ Light Table ä¹Ÿèƒ½æ­£å¸¸é‹ä½œã€‚
  - **å‚™ä»½åœ–å±¤æ”¯æ´**ï¼šå¯å³æ™‚é è¦½ä¸åŒä¸»æ¿å’Œå‚™ä»½åœ–å±¤çš„å…§å®¹ã€‚
  - **æ¸›æ³•é‡æ§‹åŸå‰‡**ï¼šç§‰æŒã€Œçµ±ä¸€è€Œéæ–°å¢ã€çš„è¨­è¨ˆå“²å­¸ï¼Œæ¶ˆé™¤é‡è¤‡çš„ç¨‹å¼ç¢¼ï¼Œæå‡ç©©å®šæ€§ã€‚
  - **æ¸¬è©¦é©…å‹•é–‹ç™¼ï¼ˆTDDï¼‰**ï¼šæ“æœ‰å®Œæ•´çš„å–®å…ƒæ¸¬è©¦å¥—ä»¶ï¼ˆ`test_localization.py` ç­‰ï¼‰ï¼Œç¢ºä¿æ¯æ¬¡æ›´æ–°çš„åŠŸèƒ½éƒ½ç¶“éé©—è­‰ï¼Œæä¾›æ›´å¯é çš„ä½¿ç”¨é«”é©—ã€‚

### å›é¥‹èˆ‡å»ºè­°

å¦‚æœä½ åœ¨ä½¿ç”¨éç¨‹ä¸­ç™¼ç¾ä»»ä½•å•é¡Œæˆ–æœ‰æ”¹é€²å»ºè­°ï¼Œæ­¡è¿é€éå…¬é–‹å„²å­˜åº«å›å ±ï¼š

  - **å•é¡Œå›å ±ï¼š** [NineBoxView Issues](https://github.com/yintzuyuan/NineBoxView/issues)

æ‰€æœ‰éŒ¯èª¤å›å ±éƒ½ä½¿ç”¨ `traceback` æ¨¡çµ„é€²è¡Œè¨˜éŒ„ã€‚

### è‡´è¬

ç‰¹åˆ¥æ„Ÿè¬ Aaron Bell çš„ [RotateView](https://github.com/aaronbell/RotateView) å¤–æ›ï¼Œè®“æˆ‘äº†è§£å¦‚ä½•ä½¿ç”¨ NSView å­é¡åˆ¥å¯¦ä½œå³æ™‚é è¦½ã€‚
ä¹Ÿè¦æ„Ÿè¬å¤§æ›²éƒ½å¸‚çš„ [Waterfall](https://github.com/Tosche/Waterfall) å¤–æ›ï¼Œå•Ÿç™¼äº†æˆ‘å¦‚ä½•å¯¦ä½œ UI äº’å‹•åŠŸèƒ½ã€‚

æ„Ÿè¬ Light Table å¤–æ›ä½œè€…çš„å¹«åŠ©ï¼ˆç›¸é—œè¨è«–è¦‹ [Issue #59](https://github.com/yintzuyuan/NineBoxView/issues/59)ï¼‰ï¼Œè®“ä¹å®®æ ¼é è¦½èƒ½å¤ æ•´åˆ Light Table çš„ç‰ˆæœ¬æ¯”å°åŠŸèƒ½ã€‚ç”±æ–¼ Light Table æ˜¯ä¸€å€‹ç¨ç«‹çš„å¤–æ›å·¥å…·è€Œé Glyphs å…§å»ºåŠŸèƒ½ï¼Œæœ¬å¤–æ›ä¹Ÿç‚ºæ­¤è¨­è¨ˆäº†å„ªé›…é™ç´šï¼ˆgraceful degradationï¼‰æ©Ÿåˆ¶ï¼Œå³ä½¿ä½ æ²’æœ‰å®‰è£ Light Table ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

å¾ v3.0.0 åˆ° v3.3.2 çš„æ¼¸é€²å¼ç™¼å±•ï¼Œæ·±åº¦ä¾è³´ç¾ä»£åŒ– AI å”ä½œé–‹ç™¼æ¨¡å¼ã€‚ç‰¹åˆ¥æ˜¯åˆ©ç”¨ Claude Code å·¥å…·é€²è¡Œ TDD æ¸¬è©¦é©…å‹•é–‹ç™¼ã€ç¨‹å¼ç¢¼é‡æ§‹å’Œå¤šåœ‹èªè¨€æœ¬åœ°åŒ–ã€‚æ•´å€‹é–‹ç™¼æ­·ç¨‹è·¨è¶Šå…©å€‹å„²å­˜åº«ï¼ˆåŸå§‹ç‰ˆâ†’é–‹ç™¼ç‰ˆï¼‰ï¼Œçµåˆäº†ç¤¾ç¾¤å›é¥‹ã€å®˜æ–¹è«–å£‡å»ºè­°å’Œ AI è¼”åŠ©çš„æŠ€è¡“å¯¦ä½œã€‚

åŒæ™‚æ„Ÿè¬ Mark2Mark çš„ [Variable Font Preview](https://github.com/Mark2Mark/variable-font-preview) å¤–æ›ï¼Œå…¶ UI ä½ˆå±€å’Œä½¿ç”¨è€…é«”é©—è¨­è¨ˆç‚ºæ­¤ç‰ˆæœ¬å¸¶ä¾†è¨±å¤šå•Ÿç™¼ã€‚

æœ€å¾Œï¼Œæ„Ÿè¬æ‰€æœ‰ä½¿ç”¨é€™å€‹å¤–æ›ä¸¦æä¾›å›é¥‹çš„è¨­è¨ˆå¸«å€‘ã€‚
ä½ å€‘çš„æ„è¦‹å¹«åŠ©æˆ‘æŒçºŒå„ªåŒ–ç¨‹å¼ç¢¼æ¶æ§‹å’Œä½¿ç”¨é«”é©—ã€‚

### ç‰ˆæ¬Šè²æ˜

æ­¤å¤–æ›ç”±æ®·æ…ˆé æ–¼ 2023 å¹´ 1 æœˆé¦–æ¬¡ç™¼å¸ƒï¼Œç¶“æ­· v3.0.0ï¼ˆ2025å¹´ 6æœˆï¼‰åˆ° v3.3.2ï¼ˆ2025å¹´ 9æœˆï¼‰çš„æ¼¸é€²å¼ç™¼å±•ã€‚

æœ¬å°ˆæ¡ˆæ¡ç”¨ Apache License 2.0 æˆæ¬Šã€‚æºç¢¼é–‹æ”¾æ–¼ GitHubï¼Œè©³ç´°æˆæ¬Šæ¢æ¬¾è«‹åƒé–±å°ˆæ¡ˆä¸­çš„ LICENSE æ–‡ä»¶ã€‚

---

## English

This is a plugin developed for [Glyphs font editing software](http://glyphsapp.com/), providing real-time preview functionality for font designers. Implemented using Python, Objective-C, and the AppKit framework, it utilizes an NSView subclass for drawing functionality. This tool allows designers to preview character combinations in different contexts simultaneously.

The third version has undergone progressive development from v3.0.0 to v3.3.2, evolving from initial modular refactoring to current multi-language support, intelligent theme detection, and a three-tier real-time redraw system. The entire development process spans two repositories, combining community feedback and AI-collaborative development, aiming to provide a more focused, efficient, and internationalized preview experience.

### Main Features

#### âš¡ Real-time Preview System

  - **Three-tier Real-time Redraw:** Center grid and surrounding grids zero-delay synchronized updates
  - **Backup Layer Support:** Real-time preview of different versions and master layers
  - **[Light Table](https://formkunft.com/light-table/) Integration:** Supports before/after version comparison display

#### ğŸ—”ï¸ Advanced Control Features

  - **Smart Character Filtering:** Automatic validation of CJK, Nice Names, Unicode Names
  - **Independent Control Panel:** Collapsible design, supports adding reference characters and precise locking
  - **Enhanced Right-click Menu:** Supports Glyph Picker and insertion functions

#### ğŸ¨ User Experience

  - **Visual Feedback System:** invalid character annotations
  - **Responsive Layout:** Grid auto-scales with window resizing
  - **Preference Memory:** Complete preservation of window size, position, settings state

### How to Use

#### Basic Operations

1.  Open the "Nine Box Preview" plugin from the "Window" menu.
2.  The preview screen will display the character currently being edited in the center in real-time.
3.  Click the "âš™" button on the main window's title bar to toggle the independent control panel.

#### Control Panel Functions

4.  In the control panel:
      - **Reference Input Field:** Enter multiple reference characters (space-separated), the plugin will randomly arrange them in surrounding grids. Supports CJK, Nice Names, Unicode Names.
      - **Lock Input Fields:** 8 independent input fields to assign fixed characters to specific positions.
      - **Lock Icon:** Click (ğŸ”’/ğŸ”“) to toggle lock mode.
      - **Clear All Locks:** One-click to clear all lock field contents.
      - **Glyph Picker:** Right-click input fields to use official "Glyph Picker" for convenient multi-character addition.

#### Advanced Features

5.  **Interactive Rearrangement:** Click the preview area to randomly rearrange unlocked glyphs.
6.  **Theme Auto-adaptation:** Theme automatically follows current tab's preview area settings.
7.  **Zoom Support:** Main preview window can be zoomed, content auto-adapts.
8.  **Multi-language:** Interface automatically follows Glyphs system language settings.

### Installation

1.  Open the "Plugin Manager" from the "Window" menu.
2.  Find "Nine Box Preview" and click the "Install" button.
3.  Restart Glyphs to use the plugin.

### System Requirements

This plugin has been tested on Glyphs 3.2.3 or higher. Some features (like the official PickGlyphs API character picker) require Glyphs 3.2 or higher.

### Technical Features and Improvements

Nine Box Preview v3.3.2 has undergone comprehensive evolution from v3.0.0 to the current version, focusing on user experience, performance, and internationalization:

#### ğŸ—ï¸ **Redesigned [DrawBot](https://github.com/schriftgestalt/DrawBotGlyphsPlugin) Mode Architecture**

  - **Highly Modular Architecture:** Code is organized in 15 professional modules, adopting Glyphs official recommended architectural patterns, significantly improving plugin stability and maintainability.
  - **Flat Coordinate System:** Uses intuitive 0-8 coordinate management, replacing the original more complex three-tier architecture.
  - **Modular Design:** Complete Document, Window, UI, Core, Data modules with separated responsibilities, easy for future expansion.

#### ğŸŒ **Multi-language Support System Refactoring**

  - **Centralized Translation Management:** Refactored existing multi-language functionality into `localization.py` module, unified management of all UI text, making translation expansion and maintenance easier.
  - **5 Language Complete Support:** Full support for English, Traditional Chinese, Simplified Chinese, Japanese, Korean.
  - **Glyphs API Integration:** Uses official `Glyphs.localize()` API for automatic language switching, seamless integration with software environment.

#### âš¡ **Three-tier Real-time Redraw System**

  - **Three-tier Data Architecture:** `base_glyphs` (real-time) â†’ `base_arrangement` (reference) â†’ `lock_inputs` (locked), achieving complex display logic through clear data overlay sequence.
  - **Center Grid Real-time Redraw:** When you switch or edit glyph in Glyphs, the center grid responds with zero delay.
  - **Complete Real-time Experience:** Center grid and surrounding grids update synchronously, providing smooth preview experience.

#### ğŸ–¥ï¸ **Tab-level Theme Detection**

  - **Precise Theme Detection:** Fixed previous global detection method, changed to detect current editing tab's theme settings, ensuring preview window colors are completely synchronized with your current workspace.
  - **Official Recommendation:** Adopts Glyphs official developer [recommended](https://forum.glyphsapp.com/t/inverted-negativebutton-in-preview-panel-vs-preview-area-at-bottom-of-edit-view/7442/2) `Font.currentTab.previewView().setBlack_()` API, ensuring stability and compatibility.
  - **Smart Restoration Mechanism:** Added `theme_detector.py` implementing multi-level detectors, gracefully falling back to backup solutions when unable to detect tabs.

#### ğŸ” **Unified Character Recognition System**

  - **InputRecognitionService:** Established unified service to handle all character input, whether reference input fields or lock fields.
  - **Complete Character Support:** Comprehensive support for CJK characters, Nice Names, and Unicode Names recognition.
  - **Smart Lock Input:** Accurately recognizes multiple characters or names separated by spaces.

#### ğŸ—‚ï¸ **Independent Control Panel & UI Enhancements**

  - **Collapsible Design:** Main preview window can hide control panel, providing immersive experience.
  - **Enhanced Right-click Menu:** Added practical functions like inserting glyphs to tabs, opening in new tabs.
  - **8 Lock Input Fields:** Precisely control reference glyphs in surrounding positions of the nine-grid.
  - **Official Glyph Picker:** Integrates `PickGlyphs` API, supports search and multi-select.

#### ğŸ“Š **Performance and Stability Optimizations**

  - **Light Table Integration:** Supports real-time preview of before/after version differences in Light Table plugin work mode. This plugin has graceful degradation mechanism, functioning normally even without Light Table installed.
  - **Backup Layer Support:** Can preview content from different masters and backup layers in real-time.
  - **Subtraction Refactoring Principle:** Following "unify rather than add" design philosophy, eliminating duplicate code, improving stability.
  - **Test-Driven Development (TDD):** Complete unit test suite (`test_localization.py` etc.), ensuring every update's functionality is verified, providing more reliable user experience.

### Feedback and Suggestions

If you encounter any issues or have suggestions for improvement while using the plugin, please report them via the public repository:

  - **Issue Reports:** [NineBoxView Issues](https://github.com/yintzuyuan/NineBoxView/issues)

All error reports are logged using the `traceback` module.

### Acknowledgements

Special thanks to Aaron Bell's [RotateView](https://github.com/aaronbell/RotateView) plugin, which helped me understand how to implement real-time preview using NSView subclasses.
Also thanks to Toshi Omagari's [Waterfall](https://github.com/Tosche/Waterfall) plugin, which inspired me on how to implement UI interaction functionality.

Thanks to the Light Table plugin author's help (related discussion in [Issue #59](https://github.com/yintzuyuan/NineBoxView/issues/59)), allowing Nine Box Preview to integrate Light Table's version comparison functionality. Since Light Table is an independent plugin tool rather than a built-in Glyphs feature, this plugin is designed with graceful degradation mechanism, functioning normally with all core features even without Light Table installed.

The progressive development from v3.0.0 to v3.3.2 heavily relied on modern AI-collaborative development mode. Particularly utilizing Claude Code tools for TDD test-driven development, code refactoring, and multi-language localization. The entire development process spans two repositories (original version â†’ development version), combining community feedback, official forum suggestions, and AI-assisted technical implementation.

Additionally, thanks to Mark2Mark's [Variable Font Preview](https://github.com/Mark2Mark/variable-font-preview) plugin, whose UI layout and user experience design provided much inspiration for this version.

Lastly, thanks to all the designers who use this plugin and provide feedback.
Your opinions help me continuously optimize the code structure and user experience.

### Copyright Notice

This plugin was first released by Tzuyuan Yin in January 2023, undergoing progressive development from v3.0.0 (June 2025) to v3.3.2 (September 2025).

This project is licensed under the Apache License 2.0. The source code is open on GitHub, for detailed license terms please refer to the LICENSE file in the project.
